<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>教师工作台</title>
</head>
<body style="height: 100%; width: 100%">
<div id="header">
    <header-template :show-exit="showExit"></header-template>
</div>

<div id="test" style="height: 100%">
    <div class="container contentBoundary" style="margin: 0; width: 100%; height: 100%">
        <div class="row" style="height: 100%">
            <div class="col-md-3" style="height : 75%; font-size: larger; margin-left:3%; background-color: cornflowerblue">
                <table class="table">
                    <caption style="font-weight: 200">个人信息</caption>
                    <tbody>
                    <tr>
                        <td>姓名：</td>
                        <td>{{teacherInfo.name}}</td>
                    </tr>
                    <tr>
                        <td>工号：</td>
                        <td>{{teacherInfo.username}}</td>
                    </tr>
                    <tr>
                        <td>学院：</td>
                        <td>{{teacherInfo.department_name}}</td>
                    </tr>
                    <tr>
                        <td>专业：</td>
                        <td>{{teacherInfo.major_name}}</td>
                    </tr>
                    </tbody>
                </table>
                <ul class="list-group" style="margin-top: 30% ">
                    <li class="list-group-item" @click="switchPage('lessonPage')">课程管理</li>
                    <li class="list-group-item" @click="switchPage('testPaperPage')">试卷管理</li>
                    <li class="list-group-item" @click="switchPage('scorePage')">成绩管理</li>
                </ul>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-7 rightDiv">
                <div class="rollControl" style="height: 100%">
                    <div v-show="pageShowController.lessonPage" class="showPageDiv">
                        <table class="table">
                            <caption style="font-weight: 200" class="lessonAddButton">
                                <h2 style="display: inline">个人课程</h2>
                                <h4 class="btn btn-primary" style="display: inline; margin-left:60%; margin-right: 10%" @click="showLessonAddPage">添加课程</h4>
                            </caption>
                            <thead>
                            <tr>
                                <th>课程名称</th>
                                <th>任课教师</th>
                                <th>归属学院</th>
                                <th>归属专业</th>
                                <th>时间</th>
                            </tr>
                            </thead>
                            <tbody class="infoTableTd">
                            <tr v-for="(val) in lessonsInfo">
                                <td>{{val.name}}</td>
                                <td>{{val.teacher_name}}</td>
                                <td>{{val.department_name}}</td>
                                <td>{{val.major_name}}</td>
                                <td>{{new Date(val.time).toLocaleDateString()}}</td>
                                <td class="btn btn-primary" @click="deleteLesson(val.id)">作废</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div v-show="pageShowController.testPaperPage" class="showPageDiv">
                        <table class="table">
                            <caption style="font-weight: 200" class="lessonAddButton">
                                <h2 style="display: inline">个人试卷</h2>
                                <h4 class="btn btn-primary" style="display: inline; margin-left:60%; margin-right: 10%" @click="showExamAddPage">新建试卷</h4>
                            </caption>
                            <thead>
                            <tr>
                                <th>试卷名称</th>
                                <th>课程名称</th>
                                <th>教师</th>
                                <th>学院</th>
                                <th>专业</th>
                                <th>时间</th>
                                <th>时长</th>
                            </tr>
                            </thead>
                            <tbody class="infoTableTd">
                            <tr v-for="(val) in exams" @dblclick="showExamQuestionEditDiv(val)">
                                <td>{{val.name}}</td>
                                <td>{{val.lesson_name}}</td>
                                <td>{{val.teacher_name}}</td>
                                <td>{{val.department_name}}</td>
                                <td>{{val.major_name}}</td>
                                <td>{{header.getTimeFormat(val.time)}}</td>
                                <td>{{val.duration + '分钟'}}</td>
                                <td class="btn btn-primary" @click="showExamEditPage(val)">编辑</td>
                                <td class="btn btn-primary" @click="deleteExam(val.id)">作废</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div v-show="pageShowController.scorePage" class="showPageDiv">score</div>
                </div>
            </div>
            <div class="col-md-1"></div>
        </div>
    </div>

    <!--弹出层-->
    <!--添加课程-->
    <div class="ejectPage" v-if="lessonAddPageShow">
        <div class="lessonAddPage">
            <form method="post" @submit.prevent="addLesson">
                <span>课程名称 ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newLesson.name">
                </label><br><br>
                <span>归属学院 ： </span>
                <label>
                    <select name="department" class="form-control" v-model="newLesson.department_id" required >
                        <option v-for="(val) in departmentData" v-bind:value="val.id">{{val.name}}</option>
                    </select>
                </label><br><br>
                <span>归属专业 ： </span>
                <label>
                    <select name="major" class="form-control" v-model="newLesson.major_id" required>
                        <option v-for="(val) in majorData" v-bind:value="val.id">{{val.name}}</option>
                    </select>
                </label><br><br>
                <input type="submit" class="form-control" value="添加课程"
                       style="width:100%;height:60px;background-color:steelblue;color:#fff;font-weight:bold;font-size:20px;">
                <div><a @click="showLessonAddPage">退出</a></div><br><br>
            </form>
        </div>
    </div>

    <!--添加试卷 编辑试卷-->
    <div class="ejectPage" v-if="examAddPageShow">
        <div class="lessonAddPage">
            <form method="post" @submit.prevent="doExamEdit">
                <span>考试名称 ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newExam.name">
                </label><br><br>
                <span>所属课程 ： </span>
                <label>
                    <select class="form-control" v-model="newExam.lesson_id" required >
                        <option v-for="(val) in lessonsInfo" v-bind:value="val.id">{{val.name}}--{{new Date(val.time).toLocaleDateString()}}</option>
                    </select>
                </label><br><br>
                <span>考试时间 ： </span>
                <label>
                    <input type="datetime-local" class="form-control" v-model="newExam.releaseTime"  required>
                </label><br><br>
                <span>考试时长 ： </span>
                <label>
                    <input type="number" class="form-control" v-model="newExam.duration" required>
                </label><br><br>
                <input type="submit" class="form-control" value="添加考试" v-if="examAddControl"
                       style="width:100%;height:60px;background-color:steelblue;color:#fff;font-weight:bold;font-size:20px;">
                <input type="submit" class="form-control" value="确认修改" v-if="examEditControl"
                       style="width:100%;height:60px;background-color:steelblue;color:#fff;font-weight:bold;font-size:20px;">
                <div><a @click="showExamAddPage">退出</a></div><br><br>
            </form>
        </div>
    </div>

    <!--编辑试卷内容-->
    <div v-if="examQuestionEditControl" class="examQuestionEditDiv rollControl">
        <div>
            <table class="table">
                <caption>
                    <h2 style="display: inline">考试信息</h2>
                    <h4 class="btn btn-primary" style="display: inline; margin-left:83%; margin-right: 10%" @click="showExamQuestionEditDiv()">退出编辑</h4>
                </caption>
                <thead>
                <tr>
                    <th>试卷名称</th>
                    <th>课程名称</th>
                    <th>教师</th>
                    <th>学院</th>
                    <th>专业</th>
                    <th>时间</th>
                    <th>时长</th>
                </tr>
                </thead>
                <tbody class="infoTableTd">
                <tr>
                    <td>{{examInfoOfEdited.name}}</td>
                    <td>{{examInfoOfEdited.lesson_name}}</td>
                    <td>{{examInfoOfEdited.teacher_name}}</td>
                    <td>{{examInfoOfEdited.department_name}}</td>
                    <td>{{examInfoOfEdited.major_name}}</td>
                    <td>{{header.getTimeFormat(examInfoOfEdited.time) }}</td>
                    <td>{{examInfoOfEdited.duration + '分钟'}}</td>
                </tr>
                </tbody>
            </table><br><br>
            <div style="width: 100%; height: 100%">
                <div style="width: 100%; height: 100%">
                    <h3 style="display: inline">选择题</h3>
                    <h4 class="btn btn-primary" style="display: inline; margin-left:90%; margin-right: 10%" @click="showNewChoiceQuestionAddDiv">添加</h4>
                </div>
                <br>
                <div class="list-group" v-for="(val, index) in choiceQuestions">
                    <div href="#" class="list-group-item active">
                        <h4 class="list-group-item-heading">
                            <label style="display: inline">{{index+1}}、{{val.description}}({{val.score}} 分)</label>
                        </h4>
                        <label class="btn btn-primary" style="background-color:red; display: block; margin-left:95%; margin-right: 0%" @click="deleteExamQuestion(val.examInfoId, 1, examInfoOfEdited.id)">删除</label>
                    </div>
                    <a href="#" class="list-group-item">
                        <h4 class="list-group-item-heading" style="display: inline">
                            A：
                        </h4>
                        <p class="list-group-item-text" style="display: inline">
                            {{val.optionA}}
                        </p>
                    </a>
                    <a href="#" class="list-group-item">
                        <h4 class="list-group-item-heading" style="display: inline">
                            B：
                        </h4>
                        <p class="list-group-item-text" style="display: inline">
                            {{val.optionB}}
                        </p>
                    </a>
                    <a href="#" class="list-group-item">
                        <h4 class="list-group-item-heading" style="display: inline">
                            C：
                        </h4>
                        <p class="list-group-item-text" style="display: inline">
                            {{val.optionC}}
                        </p>
                    </a>
                    <a href="#" class="list-group-item">
                        <h4 class="list-group-item-heading" style="display: inline">
                            D：
                        </h4>
                        <p class="list-group-item-text" style="display: inline">
                            {{val.optionD}}
                        </p>
                    </a>
                    <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading" style="display: inline">
                        答案：
                    </h4>
                    <p class="list-group-item-text" style="display: inline">
                        {{
                        String.fromCharCode("A".charCodeAt() + val.answer - 1)
                        }}
                    </p>
                    </a>
                </div>
            </div>
            <div style="width: 100%; height: 100%">
                <h3 style="display: inline">客观题</h3>
                <h4 class="btn btn-primary" style="display: inline; margin-left:90%; margin-right: 10%" @click="showNewObjectiveQuestionAddDivControl">添加</h4>
            </div>
            <br>
            <div class="list-group" v-for="(val, index) in objectiveQuestions">
                <div class="list-group-item active">
                    <h4 class="list-group-item-heading">
                        <label style="display: inline">{{index+1}}、{{val.description}}({{val.score}} 分)</label>
                    </h4>
                    <label class="btn btn-primary" style="background-color:red; display: block; margin-left:95%; margin-right: 0%" @click="deleteExamQuestion(val.examInfoId, 2, examInfoOfEdited.id)">删除</label>
                    <div style="height: 100%;width: 100%">
                        <label style="width: 100%; height: 100%;">
                            <input type="text" style="width: 100%; height: 100px">
                        </label>
                    </div>
                </div>
            </div>
            <br><br><br>
        </div>
    </div>

    <!--添加选择题-->
    <div v-if="examChoiceQuestionAddDivControl" class="ejectPage rollControl">
        <div class="lessonAddPage">
            <form method="post" @submit.prevent="addNewChoiceQuestion">
                <span>题目描述 ： </span>
                <label>
                    <input type="text" class="form-control" STYLE="height: 100px" v-model="newChoiceQuestion.description" required>
                </label><br><br>
                <span>选项A ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newChoiceQuestion.optionA" required>
                </label><br><br>
                <span>选项B ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newChoiceQuestion.optionB" required>
                </label><br><br>
                <span>选项C ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newChoiceQuestion.optionC" required>
                </label><br><br>
                <span>选项D ： </span>
                <label>
                    <input type="text" class="form-control" v-model="newChoiceQuestion.optionD" required>
                </label><br><br>
                <span>答案 ： </span>
                <label>
                    <select class="form-control" v-model="newChoiceQuestion.answer" required >
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </label><br><br>
                <span>分值 ： </span>
                <label>
                    <input type="number" class="form-control" v-model="newChoiceQuestion.score" required>
                </label><br><br>
                <input type="submit" class="form-control" value="添加试题"
                       style="width:100%;height:60px;background-color:steelblue;color:#fff;font-weight:bold;font-size:20px;">
                <div><a @click="showNewChoiceQuestionAddDiv">退出</a></div><br><br><br><br>
            </form>
        </div>
    </div>
    <br><br><br>
    <!--添加客观题-->
    <div v-if="examObjectiveQuestionAddDivControl" class="ejectPage rollControl">
        <div class="lessonAddPage">
            <form method="post" @submit.prevent="addNewObjectiveQuestion">
                <span>题目描述 ： </span>
                <label>
                    <input type="text" class="form-control" STYLE="height: 100px" v-model="newObjectiveQuestion.description" required>
                </label><br><br>
                <span>分值 ： </span>
                <label>
                    <input type="number" class="form-control" v-model="newObjectiveQuestion.score" required>
                </label><br><br>
                <input type="submit" class="form-control" value="添加试题"
                       style="width:100%;height:60px;background-color:steelblue;color:#fff;font-weight:bold;font-size:20px;">
                <div><a @click="showNewObjectiveQuestionAddDivControl">退出</a></div><br><br><br><br>
            </form>
        </div>
    </div>
</div>

<div id="footer">
    <footer-template></footer-template>
</div>

</body>
<link href="/lib/bootstrap/css/bootstrap.min.css" type="text/css" rel="stylesheet">
<script src="/lib/vue/vue.min.js"></script>
<script src="/lib/vue/axios.min.js"></script>

<link href="/css/boundary.css" type="text/css" rel="stylesheet"/>
<script src="/js/boundary.js"></script>

<link href="/css/teacher.css" type="text/css" rel="stylesheet">
<script src="/js/teacher.js"></script>
</html>